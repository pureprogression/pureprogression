# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

‚úÖ –°–æ–∑–¥–∞–Ω PHP webhook –¥–ª—è –Æ–∫–∞—Å—Å—ã (`yookassa-webhook.php`)  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ (`/subscribe`)  
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö `/workout-builder` –∏ `/my-workouts`  
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω PremiumModal –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–µ  
‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useSubscription` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∫–∏  

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

### 1. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ñ–∞–π–ª `.env.local` –¥–æ–±–∞–≤—å—Ç–µ:
```env
WEBHOOK_SECRET=–≤–∞—à_—Å–ª—É—á–∞–π–Ω—ã–π_–∫–ª—é—á_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PHP —Ñ–∞–π–ª –Ω–∞ WordPress

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `yookassa-webhook.php` –Ω–∞ —Å–µ—Ä–≤–µ—Ä Beget
2. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –≤ `/public_html/api/yookassa-webhook.php` –∏–ª–∏ –≤ –∫–æ—Ä–Ω–µ
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∏ –∑–∞–º–µ–Ω–∏—Ç–µ:
   - `WEBHOOK_SECRET` –Ω–∞ —Ç–æ—Ç –∂–µ –∫–ª—é—á, —á—Ç–æ –≤ `.env.local`
   - `NEXTJS_API_URL` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `https://pure-progression.com/api/subscription/update`)

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ –Æ–∫–∞—Å—Å–µ

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Æ–∫–∞—Å—Å—ã
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. –î–æ–±–∞–≤—å—Ç–µ URL: `https://pure-progression.ru/api/yookassa-webhook.php`
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏–µ: `payment.succeeded`

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–Ω—ã

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ü–µ–Ω—ã –≤ `src/app/subscribe/page.js`:
- `monthly`: —Ü–µ–Ω–∞ –∑–∞ –º–µ—Å—è—Ü
- `3months`: —Ü–µ–Ω–∞ –∑–∞ 3 –º–µ—Å—è—Ü–∞  
- `yearly`: —Ü–µ–Ω–∞ –∑–∞ –≥–æ–¥

### 5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ `/subscribe`
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞—Å—å
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–π—Ç–∏ –Ω–∞ `/workout-builder` –∏–ª–∏ `/my-workouts`

## –ì–æ—Ç–æ–≤–æ! üéâ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç:
- –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ `/subscribe`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/workout-builder` –∏ `/my-workouts` —Ç–æ–ª—å–∫–æ —Å –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ –Æ–∫–∞—Å—Å—É

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: `SUBSCRIPTION_SETUP.md`

